{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst button = document.querySelector('[data-start]');\nconst input = document.querySelector('#datetime-picker');\n\nconst timerDays = document.querySelector('[data-days]');\nconst timerHours = document.querySelector('[data-hours]');\nconst timerMinutes = document.querySelector('[data-minutes]');\nconst timerSeconds = document.querySelector('[data-seconds]');\n\nlet userSelectedDate;\n\nlet time = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    userSelectedDate = selectedDates[0];\n\n    const dateNow = Date.now();\n    const selected = userSelectedDate.getTime();\n\n    if (dateNow > selected) {\n      iziToast.show({\n        title: 'Error',\n        message: 'Illegal operation',\n        // icon: \"\",\n        // iconColor: `white`,\n        backgroundColor: '#EF4040',\n        titleColor: '#FFFFFF',\n        titleSize: `16px`,\n        titleLineHeight: '1.5',\n        messageColor: '#FFFFFF',\n        messageSize: `16px`,\n        messageLineHeight: '1.5',\n        position: 'topRight',\n      });\n      button.disabled = true;\n    }\n    if (dateNow < selected) {\n      button.disabled = false;\n\n      const timeLeft = selected - dateNow;\n      time = convertMs(timeLeft);\n\n      timerDays.textContent = addLeadingZero(time.days);\n      timerHours.textContent = addLeadingZero(time.hours);\n      timerMinutes.textContent = addLeadingZero(time.minutes);\n      timerSeconds.textContent = addLeadingZero(time.seconds);\n    }\n  },\n};\n\nflatpickr(`#datetime-picker`, options);\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\nbutton.addEventListener('click', () => {\n  const int = setInterval(() => {\n    let { days, hours, minutes, seconds } = time;\n\n    if (days === 0 && hours === 0 && minutes === 0 && seconds === 0) {\n      clearInterval(int);\n      input.disabled = false;\n      return;\n    }\n\n    if (seconds > 0) {\n      seconds -= 1;\n    } else {\n      seconds = 59;\n      if (minutes > 0) {\n        minutes -= 1;\n      } else {\n        minutes = 59;\n        if (hours > 0) {\n          hours -= 1;\n        } else {\n          hours = 23;\n          if (days > 0) {\n            days -= 1;\n          }\n        }\n      }\n    }\n\n    time = { days, hours, minutes, seconds };\n\n    timerDays.textContent = addLeadingZero(days);\n    timerHours.textContent = addLeadingZero(hours);\n    timerMinutes.textContent = addLeadingZero(minutes);\n    timerSeconds.textContent = addLeadingZero(seconds);\n  }, 1000);\n\n  button.disabled = true;\n  input.disabled = true;\n});\n"],"names":["button","input","timerDays","timerHours","timerMinutes","timerSeconds","userSelectedDate","time","options","selectedDates","dateNow","selected","iziToast","timeLeft","convertMs","addLeadingZero","flatpickr","value","ms","days","hours","minutes","seconds","int"],"mappings":"+IAKA,MAAMA,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAQ,SAAS,cAAc,kBAAkB,EAEjDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EAEAC,EAAO,KAEX,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BH,EAAmBG,EAAc,CAAC,EAElC,MAAMC,EAAU,KAAK,MACfC,EAAWL,EAAiB,UAmBlC,GAjBII,EAAUC,IACZC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,oBAGT,gBAAiB,UACjB,WAAY,UACZ,UAAW,OACX,gBAAiB,MACjB,aAAc,UACd,YAAa,OACb,kBAAmB,MACnB,SAAU,UAClB,CAAO,EACDZ,EAAO,SAAW,IAEhBU,EAAUC,EAAU,CACtBX,EAAO,SAAW,GAElB,MAAMa,EAAWF,EAAWD,EAC5BH,EAAOO,EAAUD,CAAQ,EAEzBX,EAAU,YAAca,EAAeR,EAAK,IAAI,EAChDJ,EAAW,YAAcY,EAAeR,EAAK,KAAK,EAClDH,EAAa,YAAcW,EAAeR,EAAK,OAAO,EACtDF,EAAa,YAAcU,EAAeR,EAAK,OAAO,CACvD,CACF,CACH,EAEAS,EAAU,mBAAoBR,CAAO,EAErC,SAASO,EAAeE,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASH,EAAUI,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CACAtB,EAAO,iBAAiB,QAAS,IAAM,CACrC,MAAMuB,EAAM,YAAY,IAAM,CAC5B,GAAI,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKf,EAExC,GAAIY,IAAS,GAAKC,IAAU,GAAKC,IAAY,GAAKC,IAAY,EAAG,CAC/D,cAAcC,CAAG,EACjBtB,EAAM,SAAW,GACjB,MACD,CAEGqB,EAAU,EACZA,GAAW,GAEXA,EAAU,GACND,EAAU,EACZA,GAAW,GAEXA,EAAU,GACND,EAAQ,EACVA,GAAS,GAETA,EAAQ,GACJD,EAAO,IACTA,GAAQ,MAMhBZ,EAAO,CAAE,KAAAY,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAEtCpB,EAAU,YAAca,EAAeI,CAAI,EAC3ChB,EAAW,YAAcY,EAAeK,CAAK,EAC7ChB,EAAa,YAAcW,EAAeM,CAAO,EACjDhB,EAAa,YAAcU,EAAeO,CAAO,CAClD,EAAE,GAAI,EAEPtB,EAAO,SAAW,GAClBC,EAAM,SAAW,EACnB,CAAC"}